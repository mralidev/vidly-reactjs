(window.webpackJsonpproject=window.webpackJsonpproject||[]).push([[0],{15:function(e){e.exports=JSON.parse('{"apiEndpoint":"http://localhost:3900/api"}')},44:function(e,t,n){e.exports=n(87)},49:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(26),c=n.n(o),i=(n(49),n(2)),s=n(6),l=n(4),u=n(3),m=n(5),p=n(19),d=n(92),b=n(43),v=n(91),f=n(9),h=n(14),g=n(7),O=n.n(g),y=n(10),j=n(20),E=n.n(j),w=n(27),k=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.totalMovies,n=e.pSize,r=e.onCurrentPage,o=e.currentPage,c=Math.ceil(t/n);if(1===c)return null;var i=E.a.range(1,c+1);return a.a.createElement("nav",null,a.a.createElement("ul",{className:"pagination"},i.map((function(e){return a.a.createElement("li",{key:e,className:e===o?"page-item active":"page-item"},a.a.createElement("a",{onClick:function(){return r(e)},className:"page-link"},e))}))))}}]),t}(r.Component),S=function(e,t,n){var r=[(e-1)*t,e*t];return Object(h.a)(n).slice(r[0],r[1])},P=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onHandleGenre,n=e.id,r=e.genre,o=e.valueProperty,c=e.textProperty;return a.a.createElement("nav",null,a.a.createElement("ul",{className:"list-group"},r.map((function(e){return a.a.createElement("li",{style:{cursor:"pointer"},key:e[o],onClick:function(){return t(e[o])},className:n===e._id?"list-group-item active page-link":"list-group-item page-link"},e[c])}))))}}]),t}(r.Component);P.defaultProps={textProperty:"name",valueProperty:"_id"};var N=P,C=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e="fa fa-heart";return this.props.liked||(e+="-o"),a.a.createElement("i",{onClick:this.props.onClick,className:e,"aria-hidden":"true",style:{cursor:"pointer"}})}}]),t}(r.Component);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var D=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).raseSort=function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.props.sortColumn);t.path===e?t.order="asc"===t.order?"desc":"asc":(t.path=e,t.order="asc"),n.props.onSort(t)},n.renderSortIcon=function(e){var t=n.props.sortColumn;return e.path!==t.path?null:"asc"===t.order?a.a.createElement("i",{className:"fa fa-sort-asc"}):a.a.createElement("i",{className:" fa fa-sort-desc"})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return a.a.createElement("thead",null,a.a.createElement("tr",null,this.props.column.map((function(t){return a.a.createElement("th",{className:"clickable",key:t.path||t.key,style:{cursor:"pointer"},onClick:function(){return e.raseSort(t.path)}},t.label,e.renderSortIcon(t))}))))}}]),t}(r.Component),R=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).renderCell=function(e,t){return t.content?t.content(e):E.a.get(e,t.path)},n.createKey=function(e,t){return e._id+(t.path||t.key)},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.columns,r=t.data;return a.a.createElement("tbody",null,r.map((function(t){return a.a.createElement("tr",{key:t._id},n.map((function(n){return a.a.createElement("td",{key:e.createKey(t,n)},e.renderCell(t,n))})))})))}}]),t}(r.Component),I=function(e){var t=e.columns,n=e.sortColumn,r=e.onSort,o=e.data,c=e.onMovieLike,i=e.onHandleDelete;return a.a.createElement("table",{className:"table"},a.a.createElement(D,{column:t,sortColumn:n,onSort:r}),a.a.createElement(R,{data:o,onMovieLike:c,onHandleDelete:i,columns:t}))},M=n(15),A=n(18),T=n.n(A);var _={init:function(){},log:function(e){console.log(e)}};T.a.interceptors.response.use(null,(function(e){return e.responce&&e.responce.status>=400&&e.responce.status<500||(_.log(e),p.toast.error("An unexpected error occurs")),Promise.reject(e)}));var F={get:T.a.get,put:T.a.put,post:T.a.post,delete:T.a.delete,setJwt:function(e){T.a.defaults.headers.common["x-auth-token"]=e}},G=n(42),L=n.n(G),U=M.apiEndpoint+"/auth",q="token";function B(){return(B=Object(y.a)(O.a.mark((function e(t,n){var r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.post(U,{email:t,password:n});case 2:r=e.sent,a=r.data,localStorage.setItem(q,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return localStorage.getItem(q)}F.setJwt(H());var J={login:function(e,t){return B.apply(this,arguments)},loginWithJwt:function(e){localStorage.setItem(q,e)},logout:function(){localStorage.removeItem(q)},getCurrentUser:function(){try{var e=localStorage.getItem(q);return L()(e)}catch(t){return null}},getJwt:H},z=function(e){function t(){var e;Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).column=[{path:"title",label:"Title",content:function(e){return a.a.createElement(w.a,{to:"/movies/".concat(e._id)},e.title)}},{path:"genre.name",label:"Genre"},{path:"numberInStock",label:"Stock"},{path:"dailyRentalRate",label:"Rate"},{key:"like",content:function(t){return a.a.createElement(C,{liked:t.liked,onClick:function(){return e.props.onMovieLike(t)}})}}],e.deleteColumn={key:"delete",content:function(t){return a.a.createElement("button",{onClick:function(){return e.props.onHandleDelete(t._id)},className:"btn btn-danger btn-sm"},"Delete")}};var n=J.getCurrentUser();return n&&n.isAdmin&&e.column.push(e.deleteColumn),e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.onPageMovies,n=e.onMovieLike,r=e.onHandleDelete,o=e.onSort,c=e.sortColumn;return a.a.createElement(I,{columns:this.column,sortColumn:c,onSort:o,data:t,onMovieLike:n,onHandleDelete:r})}}]),t}(r.Component),V=function(e){var t=e.onValue,n=e.onAutoFocus,r=e.onSearch;return a.a.createElement("input",{className:"form-control mb-3 col-md-4",value:t,type:"text",name:"search",autoFocus:n,placeholder:"Search...",onChange:r})};function W(){return F.get(M.apiEndpoint+"/genres")}function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Q=M.apiEndpoint+"/movies";function X(e){return"".concat(Q,"/").concat(e)}function Y(){return F.get(Q)}function Z(e){if(e._id){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete t._id,F.put(X(e._id),t)}return F.post(Q,e)}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ee=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={movies:[],pageSize:4,currentPage:1,genre:[],id:"All Genre",sortColumn:{path:"title",order:"asc"},movieSerchedTitle:""},n.handleDelete=function(){var e=Object(y.a)(O.a.mark((function e(t){var r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.state.movies,a=r.filter((function(e){return e._id!==t})),n.setState({movies:a}),e.prev=3,e.next=6,o=t,F.delete(X(o));case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),e.t0.response&&404===e.t0.response.status&&p.toast.error("this movie has already been deleted"),n.setState({movies:r});case 12:case"end":return e.stop()}var o}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),n.movieLike=function(e){var t=Object(h.a)(n.state.movies),r=t.indexOf(e);t[r]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t[r]),t[r].liked=!t[r].liked,n.setState({movies:t})},n.currenPage=function(e){n.setState({currentPage:e})},n.handleGenre=function(e){n.setState({id:e,movieSerchedTitle:""})},n.handleSort=function(e){n.setState({sortColumn:e})},n.searchMovieFun=function(){var e=n.state,t=e.movies,r=e.movieSerchedTitle;return t.filter((function(e){return e.title.toLowerCase().startsWith(r.toLowerCase())}))},n.fakeMoviesGenreFun=function(){var e=n.state,t=e.movies,r=e.id,a=e.movieSerchedTitle,o=n.searchMovieFun();return o.length===t.length||0===a.length?t.filter((function(e){return e.genre._id===r||"All Genre"===r})):o},n.getPageData=function(){var e=n.state,t=e.pageSize,r=e.currentPage,a=e.sortColumn,o=n.fakeMoviesGenreFun(),c=E.a.orderBy(o,[a.path],[a.order]),i=S(r,t,c);return{totalCount:o.length,data:i}},n.searchMovie=function(e){var t=e.currentTarget;0==t.value.length?n.setState({movieSerchedTitle:t.value,id:"All Genre"}):n.setState({movieSerchedTitle:t.value,id:""})},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n,r,a,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:return t=e.sent,n=t.data,e.next=6,Y();case 6:r=e.sent,a=r.data,o=[{name:"All Genre",_id:"All Genre"}].concat(Object(h.a)(n)),this.setState({genre:o,movies:a});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this.state,n=t.movies,r=t.pageSize,o=t.currentPage,c=t.genre,i=t.id,s=(t.sortColumn,t.movieSerchedTitle),l=this.props.user,u=n.length;e=0===u?"there is no movie in the database":"Showing ".concat(u," movies in the database");var m=this.getPageData(),p=m.totalCount,d=m.data;return a.a.createElement("div",null,a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-2"},a.a.createElement(N,{onHandleGenre:this.handleGenre,id:i,genre:c})),a.a.createElement("div",{className:"col"},l&&a.a.createElement(a.a.Fragment,null,a.a.createElement(w.a,{className:"btn btn-primary",to:"/movies/new"},"New Movies"),a.a.createElement("br",null),a.a.createElement("br",null)),a.a.createElement(V,{onValue:s,onAutoFocus:!1,onSearch:this.searchMovie}),a.a.createElement("p",null,e),a.a.createElement(z,{onTotalMovies:u,onPageMovies:d,onMovieLike:this.movieLike,onHandleDelete:this.handleDelete,sortColumn:this.state.sortColumn,onSort:this.handleSort}),a.a.createElement(k,{totalMovies:p,pSize:r,onCurrentPage:this.currenPage,currentPage:o}))))}}]),t}(r.Component),te=n(89),ne=function(e){var t=e.user;return a.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light"},a.a.createElement(w.a,{className:"navbar-brand",to:"/movies"},"Tidly"),a.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},a.a.createElement("span",{className:"navbar-toggler-icon"})),a.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},a.a.createElement("div",{className:"navbar-nav"},a.a.createElement(te.a,{className:"nav-item nav-link",to:"/movies"},"Movies"),a.a.createElement(te.a,{className:"nav-item nav-link",to:"/customers"},"Customers"),a.a.createElement(te.a,{className:"nav-item nav-link",to:"/rentals"},"Rentals"),!t&&a.a.createElement(a.a.Fragment,null,a.a.createElement(te.a,{className:"nav-item nav-link",to:"/login"},"Login"),a.a.createElement(te.a,{className:"nav-item nav-link",to:"/register"},"Register")),t&&a.a.createElement(a.a.Fragment,null,a.a.createElement(te.a,{className:"nav-item nav-link",to:"/profile"},t.name),a.a.createElement(te.a,{className:"nav-item nav-link",to:"/logout"},"Logout")))))},re=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("h3",null,"Customers")}}]),t}(r.Component),ae=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("h3",null,"Rentals")}}]),t}(r.Component),oe=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("h3",null,"Not Found")}}]),t}(r.Component),ce=n(8),ie=n.n(ce),se=n(21),le=function(e){var t,n=e.name,r=e.label,o=e.formType,c=e.error,i=e.focus,s=Object(se.a)(e,["name","label","formType","error","focus"]);return a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:n},r),a.a.createElement("input",Object.assign({},s,(t={className:"form-control",id:n,type:o},Object(f.a)(t,"className","form-control"),Object(f.a)(t,"name",n),Object(f.a)(t,"autoFocus",i),t))),c&&a.a.createElement("div",{className:"alert alert-danger"},c))},ue=function(e){var t=e.name,n=e.label,r=e.options,o=e.error,c=e.value,i=Object(se.a)(e,["name","label","options","error","value"]);return a.a.createElement("div",{className:"form-group"},a.a.createElement("label",{htmlFor:t},n),a.a.createElement("select",Object.assign({name:t,id:t,value:c},i,{className:"form-control"}),r.map((function(e){return a.a.createElement("option",{key:e.name},e.name)}))),o&&a.a.createElement("div",{className:"alert alert-danger"},o))};function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={data:{},errors:{}},n.validate=function(){var e=ie.a.validate(n.state.data,n.schema,{abortEarly:!1}).error;if(!e)return null;var t={},r=!0,a=!1,o=void 0;try{for(var c,i=e.details[Symbol.iterator]();!(r=(c=i.next()).done);r=!0){var s=c.value;t[s.path[0]]=s.message}}catch(l){a=!0,o=l}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return t},n.handleSubmit=function(e){e.preventDefault();var t=n.validate();n.setState({errors:t||{}}),t||n.doSubmit()},n.validateProperty=function(e){var t=e.name,r=e.value,a=Object(f.a)({},t,n.schema[t]),o=Object(f.a)({},t,r),c=ie.a.validate(o,a).error;return c?c.details[0].message:null},n.handleChange=function(e){var t=e.currentTarget,r=pe({},n.state.errors),a=n.validateProperty(t);a?r[t.name]=a:delete r[t.name];var o=pe({},n.state.data);o[t.name]=t.value,n.setState({data:o,errors:r})},n.renderSelect=function(e,t,r){var o=n.state,c=o.data,i=o.errors;return a.a.createElement(ue,{name:e,value:c[e],label:t,options:r,onChange:n.handleChange,error:i[e]})},n.renderInput=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=n.state,i=c.data,s=c.errors;return a.a.createElement(le,{name:e,label:t,value:i[e],onChange:n.handleChange,formType:r,error:s[e],focus:o})},n.onSubmitButton=function(e){return a.a.createElement("button",{className:"btn btn-primary",disabled:n.validate()},e)},n.onUpdateButton=function(e){return a.a.createElement("button",{className:"btn btn-primary"},e)},n}return Object(m.a)(t,e),t}(r.Component),be=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={data:{title:"",genre:"",numberInStock:"",dailyRentalRate:""},errors:{},movies:[],movieId:"",genres:[]},n.schema={title:ie.a.string().required().label("Title"),genre:ie.a.string().required().label("Genre"),numberInStock:ie.a.string().required().min(0).max(100).label("Number in Stock"),dailyRentalRate:ie.a.string().required().min(0).max(10).label("Daily Rental Rate")},n.doSubmit=function(){console.log("Submitted"),n.addMovie(),n.props.history.push("/movies")},n.addMovie=Object(y.a)(O.a.mark((function e(){var t,r,a,o,c,i,s,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.data,r=t.title,a=t.genre,o=t.numberInStock,c=t.dailyRentalRate,i=n.state.genres.filter((function(e){return e.name===a})),s=i[0]._id,l={_id:n.state.movieId,title:r,genreId:s,numberInStock:o,dailyRentalRate:c},e.next=6,Z(l);case 6:case"end":return e.stop()}}),e)}))),n.populateMovie=Object(y.a)(O.a.mark((function e(){var t,r,a,o,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s=n.props.match.params.id,F.get(X(s));case 3:t=e.sent,r=t.data,a=r.title,o=r.genre.name,c=r.numberInStock,i=r.dailyRentalRate,n.state.data.title=a,n.state.data.genre=o,n.state.data.numberInStock=c,n.state.data.dailyRentalRate=i,n.state.movieId=r._id,n.setState({movieId:r._id}),e.next=21;break;case 17:if(e.prev=17,e.t0=e.catch(0),!e.t0.response||404!==e.t0.response.status){e.next=21;break}return e.abrupt("return",n.props.history.replace("/not-found"));case 21:case"end":return e.stop()}var s}),e,null,[[0,17]])}))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n,r,a,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.populateMovie();case 2:return e.next=4,Y();case 4:return t=e.sent,n=t.data,e.next=8,W();case 8:r=e.sent,a=r.data,o=[{name:""}].concat(Object(h.a)(a)),this.setState({genres:o,movies:n});case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-5"},a.a.createElement("h1",null,"Movie Form to Update"),a.a.createElement("br",null),a.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("title","Title","text",!0),this.renderSelect("genre","Genre",this.state.genres),this.renderInput("numberInStock","Number in Stock","text",!1),this.renderInput("dailyRentalRate","Rate","text",!1),this.onSubmitButton("Update"))))}}]),t}(de);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={data:{username:"",password:""},errors:{}},n.schema={username:ie.a.string().required().label("Username"),password:ie.a.string().required().label("Password")},n.doSubmit=Object(y.a)(O.a.mark((function e(){var t,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.state.data,e.next=4,J.login(t.username,t.password);case 4:r=n.props.location.state,window.location=r?r.from.pathname:"/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response&&400===e.t0.response.status&&((a=fe({},n.state.errors)).username=e.t0.response.data,n.setState({errors:a}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return J.getCurrentUser()?a.a.createElement(v.a,{to:"/"}):a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-5"},a.a.createElement("h1",null,"Login"),a.a.createElement("br",null),a.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("username","Username","text",!0),this.renderInput("password","Password","password",!1),this.onSubmitButton("Login"))))}}]),t}(de),ge=M.apiEndpoint+"/users";function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(n,!0).forEach((function(t){Object(f.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={data:{username:"",password:"",name:""},errors:{}},n.schema={username:ie.a.string().email({minDomainAtoms:2}).required().label("Username"),password:ie.a.string().min(5).required().label("Password"),name:ie.a.string().required().label("Name")},n.doSubmit=Object(y.a)(O.a.mark((function e(){var t,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a=n.state.data,F.post(ge,{email:a.username,password:a.password,name:a.name});case 3:t=e.sent,J.loginWithJwt(t.headers["x-auth-token"]),window.location="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.response&&400===e.t0.response.status&&((r=ye({},n.state.errors)).username=e.t0.response.data,n.setState({errors:r}));case 11:case"end":return e.stop()}var a}),e,null,[[0,8]])}))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-5"},a.a.createElement("h1",null,"Register"),a.a.createElement("br",null),a.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("username","Username","text",!0),this.renderInput("password","Password","password",!1),this.renderInput("name","Name","text",!1),this.onSubmitButton("Register"))))}}]),t}(de),Ee=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={data:{title:"",genre:"",numberInStock:"",dailyRentalRate:""},errors:{},movies:[],genres:[]},n.schema={title:ie.a.string().required().label("Title"),genre:ie.a.string().required().label("Genre"),numberInStock:ie.a.string().required().min(0).max(100).label("Number in Stock"),dailyRentalRate:ie.a.string().required().min(0).max(10).label("Daily Rental Rate")},n.doSubmit=function(){console.log("Submitted"),n.addMovie(),n.props.history.push("/movies")},n.addMovie=Object(y.a)(O.a.mark((function e(){var t,r,a,o,c,i,s,l;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.data,r=t.title,a=t.genre,o=t.numberInStock,c=t.dailyRentalRate,i=n.state.genres.filter((function(e){return e.name===a})),s=i[0]._id,l={title:r,genreId:s,numberInStock:o,dailyRentalRate:c},e.next=6,Z(l);case 6:case"end":return e.stop()}}),e)}))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(y.a)(O.a.mark((function e(){var t,n,r,a,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y();case 2:return t=e.sent,n=t.data,e.next=6,W();case 6:r=e.sent,a=r.data,o=[{name:""}].concat(Object(h.a)(a)),this.setState({genres:o,movies:n});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"col-md-5"},a.a.createElement("h1",null,"Movie Form"),a.a.createElement("br",null),a.a.createElement("form",{onSubmit:this.handleSubmit},this.renderInput("title","Title","text",!0),this.renderSelect("genre","Genre",this.state.genres),this.renderInput("numberInStock","Number in Stock","text",!1),this.renderInput("dailyRentalRate","Rate","text",!1),this.onSubmitButton("Save"))))}}]),t}(de),we=function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).componentDidMount=function(){J.logout(),window.location="/"},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return null}}]),t}(r.Component),ke=function(e){e.path;var t=e.component,n=e.render,r=Object(se.a)(e,["path","component","render"]);return a.a.createElement(b.a,Object.assign({},r,{render:function(e){return J.getCurrentUser()?t?a.a.createElement(t,e):n(e):a.a.createElement(v.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Se=(n(84),function(e){function t(){var e,n;Object(i.a)(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(a)))).state={},n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=J.getCurrentUser();this.setState({user:e})}},{key:"render",value:function(){var e=this,t=this.state.user;return console.log(this.state.user),a.a.createElement("div",null,a.a.createElement(p.ToastContainer,null),a.a.createElement(ne,{user:t}),a.a.createElement("div",{className:"content"},a.a.createElement(d.a,null,a.a.createElement(b.a,{path:"/register",component:je}),a.a.createElement(b.a,{path:"/login",component:he}),a.a.createElement(b.a,{path:"/logout",component:we}),a.a.createElement(ke,{path:"/movies/new",component:Ee}),a.a.createElement(ke,{path:"/movies/:id",exact:!0,component:be}),a.a.createElement(b.a,{path:"/movies",render:function(t){return a.a.createElement(ee,Object.assign({},t,{user:e.state.user}))}}),a.a.createElement(b.a,{path:"/customers",component:re}),a.a.createElement(b.a,{path:"/rentals",component:ae}),a.a.createElement(b.a,{path:"/not-found/",component:oe}),a.a.createElement(v.a,{from:"/",exact:!0,to:"movies"}),a.a.createElement(v.a,{to:"not-found"}))))}}]),t}(r.Component)),Pe=(n(85),n(86),n(90));console.log("SUPER MAN",Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_NAME),c.a.render(a.a.createElement(Pe.a,null,a.a.createElement(Se,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.2a44b30e.chunk.js.map